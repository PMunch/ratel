<!DOCTYPE html><html><head><link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css"><link rel="stylesheet" href="../custom.css"><title></title></head><body><nav class="container-fluid"><ul><img src="../../logo-header-small.png"/><li><a href="../../index.html" class="contrast"><strong>Ratel</strong></a></li></ul><ul><li><a href="#" class="contrast">Getting started</a></li><li><a href="board.html" class="contrast">Documentation</a></li></ul></nav><aside><h3>Navigation</h3><a href="board.html">BOARD</a><details><summary><a href="serial.html">SERIAL</a></summary><ul><li><a href="serial.html#SerialPort">SerialPort</a></li><li><a href="serial.html#setBaudRate">setBaudRate()</a></li><li><a href="serial.html#init">init()</a></li><li><a href="serial.html#send">send()</a><span>4</span></li></ul></details><details><summary><a href="times.html">TIMES</a></summary><ul><li><a href="times.html#delayMs">delayMs()</a></li><li><a href="times.html#delayUs">delayUs()</a></li><li><a href="times.html#delayLoop">delayLoop()</a><span>2</span></li><li><a href="times.html#millis">millis()</a></li></ul></details><details><summary><a href="progmem.html">PROGMEM</a></summary><ul><li><a href="progmem.html#Progmem">Progmem</a></li><li><a href="progmem.html#ProgmemString">ProgmemString</a></li><li><a href="progmem.html#pgmReadByte">pgmReadByte()</a></li><li><a href="progmem.html#pgmReadWord">pgmReadWord()</a></li><li><a href="progmem.html#pgmReadDoubleWord">pgmReadDoubleWord()</a></li><li><a href="progmem.html#memcpyPgm">memcpyPgm()</a></li><li><a href="progmem.html#`[]`">`[]`()</a><span>3</span></li><li><a href="progmem.html#readInto">readInto()</a></li><li><a href="progmem.html#read">read()</a></li><li><a href="progmem.html#len">len()</a></li><li><a href="progmem.html#p">p()</a></li><li><a href="progmem.html#progmem">progmem()</a></li></ul></details><details open><summary><a href="i2c.html">I2C</a></summary><ul><li><a href="i2c.html#I2c">I2c</a></li><li><a href="i2c.html#init">init()</a></li><li><a href="i2c.html#start">start()</a></li><li><a href="i2c.html#stop">stop()</a></li><li><a href="i2c.html#send">send()</a></li><li><a href="i2c.html#recv">recv()</a></li><li><a href="i2c.html#writeRegister">writeRegister()</a></li><li><a href="i2c.html#readRegister">readRegister()</a></li></ul></details><details><summary><a href="io.html">IO</a></summary><ul><li><a href="io.html#Board">Board</a></li><li><a href="io.html#Port">Port</a></li><li><a href="io.html#Pin">Pin</a></li><li><a href="io.html#defaultClock">defaultClock()</a></li><li><a href="io.html#eachIt">eachIt()</a></li><li><a href="io.html#direction">direction()</a><span>2</span></li><li><a href="io.html#state">state()</a><span>2</span></li><li><a href="io.html#output">output()</a><span>2</span></li><li><a href="io.html#high">high()</a><span>2</span></li><li><a href="io.html#low">low()</a><span>2</span></li><li><a href="io.html#input">input()</a><span>2</span></li><li><a href="io.html#normal">normal()</a><span>2</span></li><li><a href="io.html#pullup">pullup()</a><span>2</span></li><li><a href="io.html#read">read()</a><span>2</span></li><li><a href="io.html#configure">configure()</a></li><li><a href="io.html#check">check()</a></li><li><a href="io.html#set">set()</a></li><li><a href="io.html#unset">unset()</a></li><li><a href="io.html#update">update()</a></li><li><a href="io.html#Hz">Hz</a></li><li><a href="io.html#Mhz">Mhz()</a></li><li><a href="io.html#Khz">Khz()</a></li></ul></details></aside><main class="container"><h2><span class="muted"><a href="board.html">board</a>/</span>i2c</h2><p>This is documentation for the i2c integration. Please note that this is just documentation for the interface, different boards might have different caveats for the various procedures.</p><dl><div id="I2c" class="group"><div id="I2c_66EB53D0" class="ident"><dt><code><span class="Keyword">type</span> <span class="Identifier"><a href="#I2c_66EB53D0">I2c</a></span> <span class="Operator">=</span> <span class="Keyword">object</span>
  </code></dt><dd>This is the type of an I2c bus, the object should be passed to all i2c procedures. If your board requires runtime information to manage the i2c bus this will be kept in this object, and the below procedures won't be defined to use a <tt class="docutils literal"><span class="pre"><span class="Keyword">static</span></span></tt> object. The board should define available i2c buses.</dd></div></div><div id="init" class="group"><div id="init_7197D8EE" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#init_7197D8EE">init</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">)</span></code></dt><dd>Initialises the I2C bus</dd></div></div><div id="start" class="group"><div id="start_3A2A1053" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#start_3A2A1053">start</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">)</span></code></dt><dd>Starts an I2C data transfer</dd></div></div><div id="stop" class="group"><div id="stop_21F4E5F2" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#stop_21F4E5F2">stop</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">)</span></code></dt><dd>Stops an I2C data transfer</dd></div></div><div id="send" class="group"><div id="send_AA171A49" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#send_AA171A49">send</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span><span class="Punctuation">)</span></code></dt><dd>Sends one raw byte of data</dd></div></div><div id="recv" class="group"><div id="recv_D544609B" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#recv_D544609B">recv</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">last</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#bool">bool</a></span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span></code></dt><dd>Receives one raw byte of data, the last argument determines if this is the last byte to read or not.</dd></div></div><div id="writeRegister" class="group"><div id="writeRegister_6E75A172" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#writeRegister_6E75A172">writeRegister</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">address</span><span class="Punctuation">,</span> <span class="Identifier">register</span><span class="Punctuation">,</span> <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span><span class="Punctuation">)</span></code></dt><dd>Writes a byte of data to the device with the given address, into the register.</dd></div></div><div id="readRegister" class="group"><div id="readRegister_E7BD2371" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#readRegister_E7BD2371">readRegister</a></span><span class="Punctuation">(</span><span class="Identifier">bus</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="i2c.html#I2c">I2c</a></span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">address</span><span class="Punctuation">,</span> <span class="Identifier">register</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span></code></dt><dd>Reads a byte from the device with the given address at the given register.</dd></div></div></dl></main></body></html>