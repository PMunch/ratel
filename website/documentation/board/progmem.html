<!DOCTYPE html><html><head><link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css"><link rel="stylesheet" href="../custom.css"><title></title></head><body><nav class="container-fluid"><ul><img src="../../logo-header-small.png"/><li><a href="../../index.html" class="contrast"><strong>Ratel</strong></a></li></ul><ul><li><a href="#" class="contrast">Getting started</a></li><li><a href="board.html" class="contrast">Documentation</a></li></ul></nav><aside><h3>Navigation</h3><a href="board.html">BOARD</a><details><summary><a href="serial.html">SERIAL</a></summary><ul><li><a href="serial.html#SerialPort">SerialPort</a></li><li><a href="serial.html#setBaudRate">setBaudRate()</a></li><li><a href="serial.html#init">init()</a></li><li><a href="serial.html#send">send()</a><span>4</span></li></ul></details><details><summary><a href="times.html">TIMES</a></summary><ul><li><a href="times.html#delayMs">delayMs()</a></li><li><a href="times.html#delayUs">delayUs()</a></li><li><a href="times.html#delayLoop">delayLoop()</a><span>2</span></li><li><a href="times.html#millis">millis()</a></li></ul></details><details open><summary><a href="progmem.html">PROGMEM</a></summary><ul><li><a href="progmem.html#Progmem">Progmem</a></li><li><a href="progmem.html#ProgmemString">ProgmemString</a></li><li><a href="progmem.html#pgmReadByte">pgmReadByte()</a></li><li><a href="progmem.html#pgmReadWord">pgmReadWord()</a></li><li><a href="progmem.html#pgmReadDoubleWord">pgmReadDoubleWord()</a></li><li><a href="progmem.html#memcpyPgm">memcpyPgm()</a></li><li><a href="progmem.html#`[]`">`[]`()</a><span>3</span></li><li><a href="progmem.html#readInto">readInto()</a></li><li><a href="progmem.html#read">read()</a></li><li><a href="progmem.html#len">len()</a></li><li><a href="progmem.html#p">p()</a></li><li><a href="progmem.html#progmem">progmem()</a></li></ul></details><details><summary><a href="i2c.html">I2C</a></summary><ul><li><a href="i2c.html#I2c">I2c</a></li><li><a href="i2c.html#init">init()</a></li><li><a href="i2c.html#start">start()</a></li><li><a href="i2c.html#stop">stop()</a></li><li><a href="i2c.html#send">send()</a></li><li><a href="i2c.html#recv">recv()</a></li><li><a href="i2c.html#writeRegister">writeRegister()</a></li><li><a href="i2c.html#readRegister">readRegister()</a></li></ul></details><details><summary><a href="io.html">IO</a></summary><ul><li><a href="io.html#Board">Board</a></li><li><a href="io.html#Port">Port</a></li><li><a href="io.html#Pin">Pin</a></li><li><a href="io.html#defaultClock">defaultClock()</a></li><li><a href="io.html#eachIt">eachIt()</a></li><li><a href="io.html#direction">direction()</a><span>2</span></li><li><a href="io.html#state">state()</a><span>2</span></li><li><a href="io.html#output">output()</a><span>2</span></li><li><a href="io.html#high">high()</a><span>2</span></li><li><a href="io.html#low">low()</a><span>2</span></li><li><a href="io.html#input">input()</a><span>2</span></li><li><a href="io.html#normal">normal()</a><span>2</span></li><li><a href="io.html#pullup">pullup()</a><span>2</span></li><li><a href="io.html#read">read()</a><span>2</span></li><li><a href="io.html#configure">configure()</a></li><li><a href="io.html#check">check()</a></li><li><a href="io.html#set">set()</a></li><li><a href="io.html#unset">unset()</a></li><li><a href="io.html#update">update()</a></li><li><a href="io.html#Hz">Hz</a></li><li><a href="io.html#Mhz">Mhz()</a></li><li><a href="io.html#Khz">Khz()</a></li></ul></details></aside><main class="container"><h2><span class="muted"><a href="board.html">board</a>/</span>progmem</h2><p>This is documentation for the progmem integration. Please note that this is just documentation for the interface, different boards might have different caveats for the various procedures.</p><dl><div id="Progmem" class="group"><div id="Progmem_EDC4CC1B" class="ident"><dt><code><span class="Keyword">type</span> <span class="Identifier"><a href="#Progmem_EDC4CC1B">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Keyword">distinct</span> <span class="Identifier">T</span></code></dt><dd>
Type for data stored in program memory, accesing this memory should trigger the correct behaviour for reading this data. If this is not a useful distinction on the selected board it will simply behave as the normal type.</dd></div></div><div id="ProgmemString" class="group"><div id="ProgmemString_0E8F9786" class="ident"><dt><code><span class="Keyword">type</span> <span class="Identifier"><a href="#ProgmemString_0E8F9786">ProgmemString</a></span><span class="Punctuation">[</span><span class="Identifier">size</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#array">array</a></span><span class="Punctuation">[</span><span class="Identifier">size</span><span class="Punctuation">,</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#char">char</a></span><span class="Punctuation">]</span><span class="Punctuation">]</span></code></dt><dd>
Special type for strings stored in program memory.</dd></div></div><div id="pgmReadByte" class="group"><div id="pgmReadByte_19304393" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#pgmReadByte_19304393">pgmReadByte</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint8">uint8</a></span></code></dt><dd>Low level procedure for reading a single byte of program memory</dd></div></div><div id="pgmReadWord" class="group"><div id="pgmReadWord_9D42D76C" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#pgmReadWord_9D42D76C">pgmReadWord</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint16">uint16</a></span></code></dt><dd>Low level procedure for reading a two-byte word of program memory</dd></div></div><div id="pgmReadDoubleWord" class="group"><div id="pgmReadDoubleWord_69738B47" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#pgmReadDoubleWord_69738B47">pgmReadDoubleWord</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">address</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#uint32">uint32</a></span></code></dt><dd>Low level procedure for reading a four-byte double word of program memory</dd></div></div><div id="memcpyPgm" class="group"><div id="memcpyPgm_971D1B71" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#memcpyPgm_971D1B71">memcpyPgm</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">dest</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span><span class="Punctuation">;</span> <span class="Identifier">src</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span><span class="Punctuation">;</span> <span class="Identifier">size</span><span class="Punctuation">:</span> <span class="Identifier">csize_t</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span></code></dt><dd>Low level procedure for reading arbitrary amounts of data from program memory</dd></div></div><div id="`[]`" class="group"><div id="" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">src</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">T</span></code></dt><dd>Dereference operator for program memory, this will read all the memory indendpented of the size of the underlying type.</dd></div><div id="" class="ident"><dt><code><span class="Keyword">template</span> <span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Identifier">N</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#array">array</a></span><span class="Punctuation">[</span><span class="Identifier">N</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">idx</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#int">int</a></span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span></code></dt><dd>Array access for program memory allocated arrays. This will either return a progmem type for whatever is stored in the array, or simply read out the value depending on whether it's a simply type or an object.</dd></div><div id="" class="ident"><dt><code><span class="Keyword">template</span> <span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Punctuation">`</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#cstring">cstring</a></span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">idx</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#int">int</a></span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span></code></dt><dd>Reads a single character from a cstring stored in program memory, this does not verify if <tt class="docutils literal"><span class="pre"><span class="Identifier">idx</span></span></tt> is actually within the string.</dd></div></div><div id="readInto" class="group"><div id="readInto_46890F3D" class="ident"><dt><code><span class="Keyword">proc</span> <span class="Identifier"><a href="#readInto_46890F3D">readInto</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">dst</span><span class="Punctuation">:</span> <span class="Keyword">var</span> <span class="Identifier">T</span><span class="Punctuation">;</span> <span class="Identifier">src</span><span class="Punctuation">:</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code></dt><dd>Reads progmem data into a variable</dd></div></div><div id="read" class="group"><div id="read_58479EE6" class="ident"><dt><code><span class="Keyword">template</span> <span class="Identifier"><a href="#read_58479EE6">read</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">T</span></code></dt><dd>Creates a read statement for the progmem data</dd></div></div><div id="len" class="group"><div id="len_139735F5" class="ident"><dt><code><span class="Keyword">template</span> <span class="Identifier"><a href="#len_139735F5">len</a></span><span class="Punctuation">[</span><span class="Identifier">N</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier"><a href="progmem.html#Progmem">Progmem</a></span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#array">array</a></span><span class="Punctuation">[</span><span class="Identifier">N</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span></code></dt><dd>Returns the length of an array in program memory</dd></div></div><div id="p" class="group"><div id="p_BE8D03DE" class="ident"><dt><code><span class="Keyword">template</span> <span class="Identifier"><a href="#p_BE8D03DE">p</a></span><span class="Punctuation">(</span><span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Keyword">static</span><span class="Punctuation">[</span><span class="Identifier"><a href="https://nim-lang.org/docs/system.html#string">string</a></span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span></code></dt><dd>Template to turn string literals into program memory strings. Analagous to the <tt class="docutils literal"><span class="pre"><span class="Identifier">F</span></span></tt> macro in Arduino. Simply call it like this:<pre class="listing"><span class="Identifier">serial</span><span class="Operator">.</span><span class="Identifier">send</span> <span class="RawData">p&quot;Hello world&quot;</span></pre></dd></div></div><div id="progmem" class="group"><div id="progmem_FC45E8F4" class="ident"><dt><code><span class="Keyword">macro</span> <span class="Identifier"><a href="#progmem_FC45E8F4">progmem</a></span><span class="Punctuation">(</span><span class="Identifier">definitions</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier"><a href="https://nim-lang.org/docs/system.html#untyped">untyped</a></span></code></dt><dd>Creates a block in which you can define variables which will be stored in program memory.</dd></div></div></dl></main></body></html>